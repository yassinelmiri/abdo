<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MELOTREX · Abdou Sall (partage & contact)</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- QR Code styling only (API de secours) -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(145deg, #f0e4e4 0%, #e6d6d6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
        }

        /* carte principale */
        .business-card {
            max-width: 880px;
            width: 100%;
            background-color: #ffffff;
            border-radius: 2.5rem 2.5rem 2rem 2rem;
            box-shadow: 0 30px 50px rgba(180, 40, 40, 0.25), 0 12px 25px rgba(0,0,0,0.15);
            overflow: hidden;
            transition: transform 0.2s ease;
        }

        /* bande supérieure - ROUGE */
        .card-header {
            background-color: #c02f2f;
            padding: 1.2rem 2.2rem 1rem 2.2rem;
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 0.5rem 1rem;
        }

        .company-title {
            font-size: 2.1rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: white;
            line-height: 1.1;
            text-transform: uppercase;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .company-title span {
            font-weight: 300;
            font-size: 1.7rem;
            margin-left: 0.2rem;
            color: #ffe1e1;
        }

        .slogan {
            color: rgba(255,255,255,0.9);
            font-size: 1rem;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: rgba(255,255,255,0.18);
            padding: 0.4rem 1.2rem;
            border-radius: 40px;
            backdrop-filter: blur(2px);
            white-space: nowrap;
        }

        /* identité avec LOGO (image) bien affiché */
        .card-profile {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 2rem;
            padding: 2rem 2.2rem 1.2rem 2.2rem;
            background: white;
        }

        .avatar-frame {
            width: 110px;
            height: 110px;
            border-radius: 50%;
            background: linear-gradient(135deg, #c02f2f, #a01e1e);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 16px rgba(192,47,47,0.3);
            flex-shrink: 0;
        }

        .logo-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid white;
            box-shadow: inset 0 -2px 5px rgba(0,0,0,0.05);
            overflow: hidden; /* pour éviter tout débordement */
        }

        .logo-image img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* remplit le cercle sans déformation */
            display: block;
            border-radius: 50%;
        }

        .name-title {
            flex: 2 1 200px;
        }

        .name-title h1 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #2a1e26;
            letter-spacing: -0.5px;
            line-height: 1.2;
        }

        .name-title .role {
            font-size: 1.2rem;
            color: #c02f2f;
            font-weight: 600;
            margin-top: 0.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .role i {
            font-size: 1.1rem;
            color: #c05a5a;
        }

        .company-detail {
            margin-left: auto;
            text-align: right;
            background: #fff1f1;
            padding: 0.7rem 1.5rem;
            border-radius: 60px;
            font-size: 0.95rem;
            color: #3a2a34;
            font-weight: 500;
            max-width: 280px;
            border: 1px solid #f0c0c0;
            flex-shrink: 0;
        }

        .company-detail i {
            color: #c02f2f;
            width: 1.2rem;
        }

        .company-detail .adresse {
            font-weight: 400;
            line-height: 1.4;
        }

        /* ligne Enregistrer / Partager - avec fonctions actives */
        .action-row {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            background: #fff7f7;
            padding: 0.9rem 2.2rem;
            border-top: 1px solid rgba(192,47,47,0.2);
            border-bottom: 1px solid rgba(192,47,47,0.2);
        }

        .contact-buttons {
            display: flex;
            gap: 1.8rem;
            flex-wrap: wrap;
        }

        .btn-outline, .btn-solid {
            font-size: 0.95rem;
            padding: 0.5rem 1.5rem;
            border-radius: 40px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: 0.15s;
            border: none;
            cursor: pointer;
        }

        .btn-outline {
            background: transparent;
            border: 1.5px solid #c02f2f;
            color: #c02f2f;
        }
        .btn-outline:hover {
            background: #ffe0e0;
        }

        .btn-solid {
            background: #c02f2f;
            color: white;
            box-shadow: 0 4px 10px rgba(192,47,47,0.3);
        }
        .btn-solid:hover {
            background: #a52020;
        }

        .share-icons {
            display: flex;
            gap: 1.5rem;
            font-size: 1.3rem;
        }

        .share-icons a, .share-icons i {
            color: #c02f2f;
            opacity: 0.8;
            transition: 0.1s;
        }
        .share-icons a:hover { opacity: 1; }

        /* grille des contacts 4x2 */
        .connect-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.2rem 1.2rem;
            padding: 1.8rem 2.2rem 1.8rem 2.2rem;
            background: white;
        }

        .connect-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 0.5rem;
            padding: 1rem 0.3rem;
            border-radius: 28px;
            background: #fff5f5;
            transition: all 0.1s ease;
            border: 1px solid transparent;
            color: #2f1e2b;
            text-decoration: none;
            min-width: 0;
        }

        .connect-item:hover {
            background: #ffe0e0;
            border-color: #d99c9c;
            transform: scale(1.02);
        }

        .connect-item i {
            font-size: 2.2rem;
            color: #c02f2f;
        }

        .connect-item span {
            font-size: 0.95rem;
            font-weight: 600;
            color: #3d2a37;
            text-transform: lowercase;
            word-break: break-word;
        }

        .connect-item span::first-letter {
            text-transform: uppercase;
        }

        .connect-item a {
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            width: 100%;
        }

        /* SECTION BASSE : QR + coordonnées */
        .qr-footer {
            background: white;
            padding: 1.5rem 2.2rem 2rem 2.2rem;
            border-top: 2px solid #f0c0c0;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
        }

        .contact-info-compact {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
            color: #31222c;
            font-size: 1rem;
            background: #fff9f9;
            padding: 1rem 1.5rem;
            border-radius: 32px;
            border: 1px solid #fad7d7;
            flex: 2 1 260px;
        }

        .contact-info-compact i {
            color: #c02f2f;
            width: 1.8rem;
            text-align: center;
            font-size: 1.1rem;
        }

        .info-line {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .qr-block {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #fff2f2;
            padding: 1rem 1.5rem;
            border-radius: 40px;
            border: 1px solid #f0c0c0;
            flex: 0 0 auto;
        }

        .qr-image {
            width: 110px;
            height: 110px;
            background: white;
            border-radius: 20px;
            padding: 8px;
            box-shadow: 0 4px 12px rgba(192,47,47,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qr-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        .qr-block span {
            font-size: 0.85rem;
            color: #c02f2f;
            font-weight: 600;
            margin-top: 0.6rem;
            letter-spacing: 0.5px;
        }

        /* fallback pour les anciens navigateurs */
        .hidden { display: none; }

        /* responsive */
        @media (max-width: 750px) {
            .card-profile {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            .name-title h1 { font-size: 2rem; }
            .company-detail {
                margin-left: 0;
                text-align: center;
                width: 100%;
                max-width: none;
            }
            .action-row { flex-direction: column; align-items: flex-start; gap: 1rem; }
            .connect-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 550px) {
            .qr-footer {
                flex-direction: column-reverse;
                align-items: center;
                text-align: center;
            }
            .contact-info-compact { width: 100%; }
            .info-line { justify-content: center; }
        }

        @media (max-width: 400px) {
            .connect-grid { grid-template-columns: 1fr; }
            .card-header { flex-direction: column; align-items: flex-start; }
        }
    </style>
</head>
<body>
    <div class="business-card">
        <!-- En‑tête MELOTREX SAS couleur ROUGE -->
        <div class="card-header">
            <div class="company-title">
                MELOTREX <span>SAS</span>
            </div>
            <div class="slogan">
                <i class="fas fa-gem" style="color: #ffd966; margin-right: 6px;"></i> confiance & innovation
            </div>
        </div>

        <!-- Bloc identité : LOGO (affichage corrigé : object-fit cover) -->
        <div class="card-profile">
            <div class="avatar-frame">
                <div class="logo-image">
                    <img src="./logo.png" alt="logo MELOTREX" 
                         onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'100\' height=\'100\' viewBox=\'0 0 100 100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'45\' fill=\'%23c02f2f\'/%3E%3Ctext x=\'50\' y=\'70\' font-size=\'50\' text-anchor=\'middle\' fill=\'white\' font-family=\'Arial\'%3EM%3C/text%3E%3C/svg%3E';">
                </div>
            </div>
            <div class="name-title">
                <h1>Abdou Sall</h1>
                <div class="role">
                    <i class="fas fa-user-tie"></i> Responsable
                </div>
            </div>
            <div class="company-detail">
                <div class="info-line"><i class="fas fa-building"></i> MELOTREX SAS</div>
                <div class="adresse">
                    61-69 rue Camille Pelletan<br>
                    immeuble Emeraude 2<br>
                    33150 Cenon, France
                </div>
            </div>
        </div>

        <!-- Ligne Enregistrer / Partager avec fonctions actives -->
        <div class="action-row">
            <div class="contact-buttons">
                <!-- Bouton Enregistrer (télécharge un fichier .vcf) -->
                <button class="btn-outline" id="saveContactBtn"><i class="far fa-address-card"></i> Enregistrer</button>
                <!-- Bouton Partager (utilise l'API Web Share si disponible) -->
                <button class="btn-solid" id="shareBtn"><i class="fas fa-share-alt"></i> Partager</button>
            </div>
            <div class="share-icons">
                <a href="https://www.linkedin.com/in/abdou-sall-b6021a153/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                <a href="mailto:a.sall@melotrex.com"><i class="fas fa-envelope"></i></a>
                <i class="fas fa-ellipsis-h"></i>
            </div>
        </div>

        <!-- Zone "CONNECTER" -->
        <div style="padding: 0.2rem 2.2rem 0; background: white; font-weight: 600; color: #c02f2f; font-size: 1.5rem;">
            CONNECTER
        </div>

        <!-- Grille 4x2 de contacts -->
        <div class="connect-grid">
            <div class="connect-item"><a href="#"><i class="fab fa-whatsapp"></i><span>WhatsApp</span></a></div>
            <div class="connect-item"><a href="mailto:a.sall@melotrex.com"><i class="fas fa-envelope"></i><span>e‑mail</span></a></div>
            <div class="connect-item"><a href="tel:+33769445731"><i class="fas fa-phone-alt"></i><span>appel</span></a></div>
            <div class="connect-item"><a href="https://maps.google.com/?q=61-69+rue+Camille+Pelletan+33150+Cenon" target="_blank"><i class="fas fa-map-marker-alt"></i><span>localisation</span></a></div>
            <div class="connect-item"><a href="https://melotrex.eu/" target="_blank"><i class="fas fa-globe"></i><span>site web</span></a></div>
            <div class="connect-item"><a href="https://www.facebook.com/kool.deejay" target="_blank"><i class="fab fa-facebook"></i><span>facebook</span></a></div>
            <div class="connect-item"><a href="#"><i class="fas fa-video"></i><span>chaine vidéo</span></a></div>
            <div class="connect-item"><a href="https://www.instagram.com/abdou_khadre_sall/" target="_blank"><i class="fab fa-instagram"></i><span>instagram</span></a></div>
        </div>

        <!-- SECTION BASSE : QR (fichier local) + coordonnées -->
        <div class="qr-footer">
            <!-- Coordonnées téléphoniques et email -->
            <div class="contact-info-compact">
                <div class="info-line"><i class="fas fa-phone-alt"></i> +33 5 47 79 43 00 (Fax)</div>
                <div class="info-line"><i class="fas fa-mobile-alt"></i> +33 7 69 44 57 31</div>
                <div class="info-line"><i class="fas fa-envelope"></i> a.sall@melotrex.com</div>
                <div class="info-line"><i class="fas fa-fax"></i> +33 5 47 79 43 00</div>
                <div class="info-line" style="margin-top:4px;"><i class="fas fa-link"></i> melotrex.eu</div>
            </div>

            <!-- QR code depuis le fichier local QR.png -->
            <div class="qr-block">
                <div class="qr-image">
                    <img src="./QR.png" alt="QR Melotrex"
                         onerror="this.onerror=null; this.src='https://chart.googleapis.com/chart?chs=100x100&cht=qr&chl=https://melotrex.eu/&choe=UTF-8';">
                </div>
                <span>SCANNEZ · SITE WEB</span>
            </div>
        </div>

        <!-- signature discrète -->
        <div style="background: white; padding: 0.2rem 2.2rem 1.2rem 2.2rem; text-align: right; color: #c07a7a; font-size: 0.9rem; border-top: 1px solid #fadcdc;">
            <i class="fas fa-check-circle" style="color: #c02f2f;"></i> connecté avec MELOTREX
        </div>
    </div>

    <!-- Script pour les boutons Enregistrer et Partager -->
    <script>
        (function() {
            // Création du contact VCF (vCard)
            function generateVCard() {
                return `BEGIN:VCARD
VERSION:3.0
FN:Abdou Sall
N:Sall;Abdou;;;
TITLE:Responsable développement
ORG:MELOTREX SAS
ADR:;;61-69 rue Camille Pelletan, immeuble Emeraude 2;33150 Cenon;France
TEL;TYPE=WORK,FAX:+33 5 47 79 43 00
TEL;TYPE=CELL:+33 7 69 44 57 31
EMAIL:a.sall@melotrex.com
URL:https://melotrex.eu/
NOTE:Carte interactive MELOTREX
END:VCARD`;
            }

            // Bouton Enregistrer (téléchargement vCard)
            document.getElementById('saveContactBtn').addEventListener('click', function() {
                const vcard = generateVCard();
                const blob = new Blob([vcard], { type: 'text/vcard' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'abdou_sall_melotrex.vcf';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });

            // Bouton Partager (Web Share API si disponible, sinon fallback)
            document.getElementById('shareBtn').addEventListener('click', function() {
                const shareData = {
                    title: 'Abdou Sall - MELOTREX',
                    text: 'Responsable développement chez MELOTREX SAS',
                    url: 'https://melotrex.eu/'
                };

                if (navigator.share && /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                    // Mobile avec Web Share
                    navigator.share(shareData).catch(() => {
                        alert('Partage annulé ou non supporté');
                    });
                } else {
                    // Fallback : copier le lien dans le presse-papier
                    navigator.clipboard.writeText('https://melotrex.eu/').then(() => {
                        alert('Lien copié dans le presse-papier !');
                    }).catch(() => {
                        prompt('Copiez ce lien :', 'https://melotrex.eu/');
                    });
                }
            });

            // Gestion du clic sur l'icône partage (ellipsis) — partage aussi
            document.querySelector('.share-icons .fa-ellipsis-h').parentElement.addEventListener('click', function(e) {
                e.preventDefault();
                const shareData = {
                    title: 'Abdou Sall - MELOTREX',
                    text: 'Carte de visite professionnelle',
                    url: 'https://melotrex.eu/'
                };
                if (navigator.share && /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                    navigator.share(shareData).catch(() => {});
                } else {
                    navigator.clipboard.writeText('https://melotrex.eu/').then(() => {
                        alert('Lien copié !');
                    }).catch(() => {
                        prompt('Copiez ce lien :', 'https://melotrex.eu/');
                    });
                }
            });
        })();
    </script>

    <!-- footnote -->
    <div style="position: fixed; bottom: 6px; right: 16px; opacity:0.4; font-size:0.75rem; color:#b24646;">
        carte · logo & QR · partage actif
    </div>
</body>
</html>